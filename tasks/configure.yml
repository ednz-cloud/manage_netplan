---
# task/configure file for manage_netplan
- name: "Netplan | Copy netplan configuration template into {{ manage_netplan_config_file }}"
  ansible.builtin.template:
    src: netplan.yaml.j2
    dest: "{{ manage_netplan_config_file }}"
    mode: "0644"
    owner: root
    group: root
    backup: true
  when: manage_netplan_configuration != []
  register: _manage_netplan_configuration

- name: "Netplan | Set generate-check and apply-check variables"
  ansible.builtin.set_fact:
    _manage_netplan_need_generate: true
    _manage_netplan_need_apply: true
  when:
    - _manage_netplan_configuration is defined
    - _manage_netplan_configuration.changed
